<!doctype html>
<html class="no-js" lang="en">
<head>
<meta charset="utf-8">
<title>jQuery.LazyJaxDavis - Demos</title>
<meta name="viewport" content="width=1000">
<link rel="stylesheet" href="/jQuery.LazyJaxDavis/doc/common/css/style.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script src="/jQuery.LazyJaxDavis/lib/davis.js"></script>
<script src="/jQuery.LazyJaxDavis/jquery.lazyjaxdavis.js"></script>
<script src="/jQuery.LazyJaxDavis/doc/common/js/script.js"></script>
</head>
<body><div class="mod-all">

<div class="mod-header">
	<h1><a href="/jQuery.LazyJaxDavis/doc/">jQuery.LazyJaxDavis</a></h1>
</div>


<div class="mod-body">
	<div class="mod-side">
	<div class="mod-sidenav" id="sidenav">
		<ul>
			<li class="first"><a href="/jQuery.LazyJaxDavis/doc/">Introduction</a></li>
			
				<li class="post"><a href="/jQuery.LazyJaxDavis/doc/pages/setup.html">Setup</a></li>
			
				<li class="post"><a href="/jQuery.LazyJaxDavis/doc/pages/lazylinks.html">Lazy links/forms</a></li>
			
				<li class="post"><a href="/jQuery.LazyJaxDavis/doc/pages/anchorhandling.html">Anchor handling</a></li>
			
				<li class="post"><a href="/jQuery.LazyJaxDavis/doc/pages/urlrouting.html">URL routing</a></li>
			
				<li class="post"><a href="/jQuery.LazyJaxDavis/doc/pages/davis.html">Davis.js</a></li>
			
				<li class="post"><a href="/jQuery.LazyJaxDavis/doc/pages/demos.html">Demos</a></li>
			
		</ul>
		<ul>
			<li><a href="https://github.com/Takazudo/jQuery.LazyJaxDavis"><span>⇱</span> Project page</a></li>
			<li><a href="https://github.com/Takazudo/jQuery.LazyJaxDavis/tags"><span>⇱</span> Downloads</a></li>
		</ul>
	</div>
</div>

	<div class="mod-main" id="main">
			<div id="lazyjaxdavisroot">
			<!-- LazyJaxDavis start -->

			<div class="mod-article">
				<h2>Demos</h2>

<p>Here's some simple demos.<br/>
These may help you to understand jQuery.LazyJaxDavis.</p>

<h3>Simple</h3>

<p>A very simple demo.</p>

<ul>
<li><a href="/jQuery.LazyJaxDavis/demos/simple/" target="_blank" class="apply-nolazy">demo (opens in another window)</a></li>
</ul>


<p>This demo is pretty simiar to this document itself. It just fetches the new page, then update the main content with animation.</p>

<div class="highlight"><pre><code class="javascript"><span class="k">new</span> <span class="nx">$</span><span class="p">.</span><span class="nx">LazyJaxDavis</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">router</span><span class="p">){</span>

  <span class="kd">var</span> <span class="nx">$root</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#lazyjaxdavisroot&#39;</span><span class="p">);</span>

  <span class="nx">router</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="s1">&#39;everyfetchstart&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">page</span><span class="p">){</span>
    <span class="nx">$root</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s1">&#39;opacity&#39;</span><span class="p">,</span> <span class="mf">0.6</span><span class="p">);</span>
    <span class="nb">window</span><span class="p">.</span><span class="nx">scrollTo</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="nx">router</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="s1">&#39;everyfetchsuccess&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">page</span><span class="p">){</span>
    <span class="nx">$root</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s1">&#39;opacity&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
    <span class="nx">$newcontent</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">page</span><span class="p">.</span><span class="nx">rip</span><span class="p">(</span><span class="s1">&#39;content&#39;</span><span class="p">)).</span><span class="nx">hide</span><span class="p">();</span>
    <span class="nx">$root</span><span class="p">.</span><span class="nx">empty</span><span class="p">().</span><span class="nx">append</span><span class="p">(</span><span class="nx">$newcontent</span><span class="p">);</span>
    <span class="nx">$newcontent</span><span class="p">.</span><span class="nx">fadeIn</span><span class="p">();</span>
    <span class="nx">page</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s1">&#39;pageready&#39;</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="nx">router</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="s1">&#39;everyfetchfail&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="nx">alert</span><span class="p">(</span><span class="s1">&#39;ajax error!&#39;</span><span class="p">);</span>
    <span class="nx">$root</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s1">&#39;opacity&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
  <span class="p">});</span>

<span class="p">});</span>
</code></pre></div>




<h3 id="multirip">Multi-rip</h3>


<p>This demo shows how multi-rip works.</p>

<ul>
<li><a href="/jQuery.LazyJaxDavis/demos/multirip/" target="_blank" class="apply-nolazy">demo (opens in another window)</a></li>
</ul>


<p>In this demo, you can see that the main content and sidenav are refreshed.</p>

<div class="highlight"><pre><code class="javascript"><span class="nx">$</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>

  <span class="k">new</span> <span class="nx">$</span><span class="p">.</span><span class="nx">LazyJaxDavis</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">router</span><span class="p">){</span>

    <span class="kd">var</span> <span class="nx">$root</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#lazyjaxdavisroot&#39;</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">$sidenav</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#sidenav&#39;</span><span class="p">);</span>

    <span class="nx">router</span><span class="p">.</span><span class="nx">option</span><span class="p">({</span>
      <span class="nx">expr</span><span class="o">:</span><span class="p">{</span>
        <span class="nx">sidenav</span><span class="o">:</span> <span class="sr">/&lt;!-- sidenav start --&gt;([\s\S]*)&lt;!-- sidenav end --&gt;/</span>
      <span class="p">}</span>
    <span class="p">});</span>

    <span class="nx">router</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="s1">&#39;everyfetchstart&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">page</span><span class="p">){</span>
      <span class="nx">$root</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s1">&#39;opacity&#39;</span><span class="p">,</span> <span class="mf">0.6</span><span class="p">);</span>
      <span class="nb">window</span><span class="p">.</span><span class="nx">scrollTo</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
    <span class="p">});</span>

    <span class="nx">router</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="s1">&#39;everyfetchsuccess&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">page</span><span class="p">){</span>

      <span class="nx">$root</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s1">&#39;opacity&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
      <span class="nx">$newcontent</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">page</span><span class="p">.</span><span class="nx">rip</span><span class="p">(</span><span class="s1">&#39;content&#39;</span><span class="p">)).</span><span class="nx">hide</span><span class="p">();</span> <span class="c1">// rips main</span>
      <span class="nx">$root</span><span class="p">.</span><span class="nx">empty</span><span class="p">().</span><span class="nx">append</span><span class="p">(</span><span class="nx">$newcontent</span><span class="p">);</span>
      <span class="nx">$newcontent</span><span class="p">.</span><span class="nx">fadeIn</span><span class="p">();</span>

      <span class="nx">$sidenav</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="nx">page</span><span class="p">.</span><span class="nx">rip</span><span class="p">(</span><span class="s1">&#39;sidenav&#39;</span><span class="p">));</span> <span class="c1">// rips sidenav</span>

      <span class="nx">page</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s1">&#39;pageready&#39;</span><span class="p">);</span>

    <span class="p">});</span>

    <span class="nx">router</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="s1">&#39;everyfetchfail&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
      <span class="nx">alert</span><span class="p">(</span><span class="s1">&#39;ajax error!&#39;</span><span class="p">);</span>
      <span class="nx">$root</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s1">&#39;opacity&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
    <span class="p">});</span>

  <span class="p">});</span>

<span class="p">});</span>
</code></pre></div>




<h3 id="ripall">Multi-rip ripAll</h3>


<p>This demo shows how ripAll works.</p>

<ul>
<li><a href="/jQuery.LazyJaxDavis/demos/ripall/" target="_blank" class="apply-nolazy">demo (opens in another window)</a></li>
</ul>


<p>In this demo, you can see all incoming page's imgs are preloaded.<br/>
I used <a href="https://github.com/Takazudo/jQuery.ImgLoader">jQuery.ImgLoader</a> to preload all imgs. With jQuery.ImgLoader, you can do something when all passed imgs' srcs were load completed. <code>page.ripAll</code> can rip all imgs' srcs with regexp like <code>/src="([^"]+)"/gi</code>.</p>

<div class="highlight"><pre><code class="javascript"><span class="nx">$</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>

  <span class="k">new</span> <span class="nx">$</span><span class="p">.</span><span class="nx">LazyJaxDavis</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">router</span><span class="p">){</span>

    <span class="kd">var</span> <span class="nx">$root</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#lazyjaxdavisroot&#39;</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">$loader</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;&lt;div id=&quot;loader&quot;&gt;Loading...&lt;/div&gt;&#39;</span><span class="p">).</span><span class="nx">appendTo</span><span class="p">(</span><span class="s1">&#39;body&#39;</span><span class="p">);</span>

    <span class="nx">router</span><span class="p">.</span><span class="nx">option</span><span class="p">({</span>
      <span class="nx">expr</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">imgsrc</span><span class="o">:</span> <span class="sr">/src=&quot;([^&quot;]+)&quot;/gi</span>
      <span class="p">}</span>
    <span class="p">});</span>

    <span class="nx">router</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="s1">&#39;everyfetchstart&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">page</span><span class="p">){</span>
      <span class="nx">$root</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s1">&#39;opacity&#39;</span><span class="p">,</span> <span class="mf">0.6</span><span class="p">);</span>
      <span class="nx">$loader</span><span class="p">.</span><span class="nx">show</span><span class="p">();</span>
      <span class="nb">window</span><span class="p">.</span><span class="nx">scrollTo</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
    <span class="p">});</span>

    <span class="nx">router</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="s1">&#39;everyfetchsuccess&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">page</span><span class="p">){</span>

      <span class="kd">var</span> <span class="nx">srcs</span> <span class="o">=</span> <span class="nx">page</span><span class="p">.</span><span class="nx">ripAll</span><span class="p">(</span><span class="s1">&#39;imgsrc&#39;</span><span class="p">);</span> <span class="c1">// ripAll returns results as an array</span>
      <span class="kd">var</span> <span class="nx">complete</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
        <span class="nx">$loader</span><span class="p">.</span><span class="nx">hide</span><span class="p">();</span>
        <span class="nx">$root</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s1">&#39;opacity&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
        <span class="nx">$newcontent</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">page</span><span class="p">.</span><span class="nx">rip</span><span class="p">(</span><span class="s1">&#39;content&#39;</span><span class="p">)).</span><span class="nx">hide</span><span class="p">();</span>
        <span class="nx">$root</span><span class="p">.</span><span class="nx">empty</span><span class="p">().</span><span class="nx">append</span><span class="p">(</span><span class="nx">$newcontent</span><span class="p">);</span>
        <span class="nx">$newcontent</span><span class="p">.</span><span class="nx">fadeIn</span><span class="p">();</span>
        <span class="nx">page</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s1">&#39;pageready&#39;</span><span class="p">);</span>
      <span class="p">}</span>

      <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">srcs</span><span class="p">.</span><span class="nx">length</span><span class="p">){</span>
        <span class="c1">// if no imgs found, just complete pagefetch.</span>
        <span class="nx">complete</span><span class="p">();</span>
      <span class="p">}</span><span class="k">else</span><span class="p">{</span>
        <span class="c1">// if imgs were there, do imgs&#39; preloading.</span>
        <span class="kd">var</span> <span class="nx">loader</span> <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">ImgLoader</span><span class="p">({</span>
          <span class="nx">srcs</span><span class="o">:</span> <span class="nx">srcs</span><span class="p">,</span>
          <span class="nx">pipesize</span><span class="o">:</span> <span class="mi">5</span><span class="p">,</span>
          <span class="nx">delay</span><span class="o">:</span> <span class="mi">0</span>
        <span class="p">});</span>
        <span class="nx">loader</span><span class="p">.</span><span class="nx">load</span><span class="p">().</span><span class="nx">done</span><span class="p">(</span><span class="nx">complete</span><span class="p">);</span>
      <span class="p">}</span>

    <span class="p">});</span>

    <span class="nx">router</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="s1">&#39;everyfetchfail&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
      <span class="nx">alert</span><span class="p">(</span><span class="s1">&#39;ajax error!&#39;</span><span class="p">);</span>
      <span class="nx">$root</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s1">&#39;opacity&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
    <span class="p">});</span>

  <span class="p">});</span>

<span class="p">});</span>
</code></pre></div>




<h3 id="customloading">Custom loading</h3>


<p>This demo shows how to implement custom loading widget.</p>

<ul>
<li><a href="/jQuery.LazyJaxDavis/demos/customloading/" target="_blank" class="apply-nolazy">demo (opens in another window)</a></li>
</ul>


<p>In this demo, I used <a href="https://github.com/Takazudo/jQuery.ui.domwindow">jQuery.ui.domwindow</a> (coded by me) for the loading overlay.</p>

<div class="highlight"><pre><code class="javascript"><span class="nx">$</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>

  <span class="k">new</span> <span class="nx">$</span><span class="p">.</span><span class="nx">LazyJaxDavis</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">router</span><span class="p">){</span>

    <span class="kd">var</span> <span class="nx">$overlay</span> <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">ui</span><span class="p">.</span><span class="nx">hideoverlay</span><span class="p">.</span><span class="nx">setup</span><span class="p">({</span>
      <span class="nx">spinnersrc</span><span class="o">:</span> <span class="s1">&#39;/jQuery.LazyJaxDavis/demos/customloading/common/img/spinner.gif&#39;</span>
    <span class="p">});</span>
    <span class="kd">var</span> <span class="nx">$root</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#lazyjaxdavisroot&#39;</span><span class="p">);</span>

    <span class="nx">router</span><span class="p">.</span><span class="nx">option</span><span class="p">({</span>
      <span class="nx">minwaittime</span><span class="o">:</span> <span class="mi">800</span>
    <span class="p">});</span>

    <span class="nx">router</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="s1">&#39;everyfetchstart&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">page</span><span class="p">){</span>
      <span class="nb">window</span><span class="p">.</span><span class="nx">scrollTo</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
      <span class="nx">$overlay</span><span class="p">.</span><span class="nx">hideoverlay</span><span class="p">(</span><span class="s1">&#39;show&#39;</span><span class="p">);</span>
    <span class="p">});</span>

    <span class="nx">router</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="s1">&#39;everyfetchsuccess&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">page</span><span class="p">){</span>
      <span class="nx">$overlay</span>
        <span class="p">.</span><span class="nx">one</span><span class="p">(</span><span class="s1">&#39;hideoverlay.hideend&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
          <span class="nx">$root</span><span class="p">.</span><span class="nx">empty</span><span class="p">().</span><span class="nx">append</span><span class="p">(</span><span class="nx">page</span><span class="p">.</span><span class="nx">rip</span><span class="p">(</span><span class="s1">&#39;content&#39;</span><span class="p">));</span>
          <span class="nx">page</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s1">&#39;pageready&#39;</span><span class="p">);</span>
        <span class="p">})</span>
        <span class="p">.</span><span class="nx">hideoverlay</span><span class="p">(</span><span class="s1">&#39;hide&#39;</span><span class="p">);</span>
    <span class="p">});</span>

    <span class="nx">router</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="s1">&#39;everyfetchfail&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
      <span class="nx">alert</span><span class="p">(</span><span class="s1">&#39;ajax error!&#39;</span><span class="p">);</span>
    <span class="p">});</span>

  <span class="p">});</span>

<span class="p">});</span>
</code></pre></div>


<h3>URL routing</h3>

<p>This demo shows how URL routing works.</p>

<ul>
<li><a href="/jQuery.LazyJaxDavis/demos/pagespecificevents/" target="_blank" class="apply-nolazy">demo (opens in another window)</a></li>
</ul>


<p>In this demo, I prepared logger on the left top of the screen. You can see that each URL routing events are fired. You can also check that path regexp patterns are also applied. the links "bar~" are defined as regexp <code>/bar[0-9]+\.html/</code> in the code below.</p>

<p>And, I commented out one routing here. If you comment out this, you'll see an error there. The reason why this reports error is that this routing conflicts with the last routing. You can't make conflicted routings here.</p>

<div class="highlight"><pre><code class="javascript"><span class="nx">$</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>

  <span class="c1">// logger</span>
  <span class="kd">var</span> <span class="nx">Logger</span> <span class="o">=</span> <span class="p">...</span>
  <span class="kd">var</span> <span class="nx">logger</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Logger</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">log</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">msg</span><span class="p">)</span> <span class="p">{</span> <span class="nx">logger</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">msg</span><span class="p">);</span> <span class="p">};</span>
  <span class="kd">var</span> <span class="nx">loglight</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">msg</span><span class="p">)</span> <span class="p">{</span> <span class="nx">logger</span><span class="p">.</span><span class="nx">loglight</span><span class="p">(</span><span class="nx">msg</span><span class="p">);</span> <span class="p">};</span>

  <span class="k">new</span> <span class="nx">$</span><span class="p">.</span><span class="nx">LazyJaxDavis</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">router</span><span class="p">){</span>

    <span class="kd">var</span> <span class="nx">$root</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#lazyjaxdavisroot&#39;</span><span class="p">);</span>

    <span class="nx">router</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="s1">&#39;everyfetchstart&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">page</span><span class="p">){</span>
      <span class="nx">$root</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s1">&#39;opacity&#39;</span><span class="p">,</span> <span class="mf">0.6</span><span class="p">);</span>
      <span class="nb">window</span><span class="p">.</span><span class="nx">scrollTo</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
      <span class="nx">log</span><span class="p">(</span><span class="s1">&#39;everyfetchstart&#39;</span><span class="p">);</span>
    <span class="p">});</span>

    <span class="nx">router</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="s1">&#39;everyfetchsuccess&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">page</span><span class="p">){</span>
      <span class="nx">log</span><span class="p">(</span><span class="s1">&#39;everyfetchsuccess&#39;</span><span class="p">);</span>
      <span class="nx">$root</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s1">&#39;opacity&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
      <span class="nx">$newcontent</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">page</span><span class="p">.</span><span class="nx">rip</span><span class="p">(</span><span class="s1">&#39;content&#39;</span><span class="p">)).</span><span class="nx">hide</span><span class="p">();</span>
      <span class="nx">$root</span><span class="p">.</span><span class="nx">empty</span><span class="p">().</span><span class="nx">append</span><span class="p">(</span><span class="nx">$newcontent</span><span class="p">);</span>
      <span class="nx">$newcontent</span><span class="p">.</span><span class="nx">fadeIn</span><span class="p">();</span>
      <span class="nx">page</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s1">&#39;pageready&#39;</span><span class="p">);</span>
    <span class="p">});</span>

    <span class="nx">router</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="s1">&#39;everypageready&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
      <span class="nx">log</span><span class="p">(</span><span class="s1">&#39;everypageready&#39;</span><span class="p">);</span>
    <span class="p">});</span>

    <span class="nx">router</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="s1">&#39;everyfetchfail&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
      <span class="nx">log</span><span class="p">(</span><span class="s1">&#39;everyfetchfail&#39;</span><span class="p">);</span>
      <span class="nx">$root</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s1">&#39;opacity&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
    <span class="p">});</span>

    <span class="nx">router</span><span class="p">.</span><span class="nx">route</span><span class="p">([</span>
      <span class="p">{</span>
        <span class="nx">path</span><span class="o">:</span> <span class="s1">&#39;/jQuery.LazyJaxDavis/demos/pagespecificevents/&#39;</span><span class="p">,</span>
        <span class="nx">fetchstart</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>
          <span class="nx">loglight</span><span class="p">(</span><span class="s1">&#39;fetchstart: /jQuery.LazyJaxDavis/demos/pagespecificevents/&#39;</span><span class="p">);</span>
        <span class="p">},</span>
        <span class="nx">fetchsuccess</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>
          <span class="nx">loglight</span><span class="p">(</span><span class="s1">&#39;fetchsuccess: /jQuery.LazyJaxDavis/demos/pagespecificevents/&#39;</span><span class="p">);</span>
        <span class="p">},</span>
        <span class="nx">pageready</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>
          <span class="nx">loglight</span><span class="p">(</span><span class="s1">&#39;pageready: /jQuery.LazyJaxDavis/demos/pagespecificevents/&#39;</span><span class="p">);</span>
        <span class="p">}</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="nx">path</span><span class="o">:</span> <span class="s1">&#39;/jQuery.LazyJaxDavis/demos/pagespecificevents/pages/foo1.html&#39;</span><span class="p">,</span>
        <span class="nx">fetchstart</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>
          <span class="nx">loglight</span><span class="p">(</span><span class="s1">&#39;fetchstart: /jQuery.LazyJaxDavis/demos/pagespecificevents/pages/foo1.html&#39;</span><span class="p">);</span>
        <span class="p">},</span>
        <span class="nx">fetchsuccess</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>
          <span class="nx">loglight</span><span class="p">(</span><span class="s1">&#39;fetchsuccess: /jQuery.LazyJaxDavis/demos/pagespecificevents/pages/foo1.html&#39;</span><span class="p">);</span>
        <span class="p">},</span>
        <span class="nx">pageready</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>
          <span class="nx">loglight</span><span class="p">(</span><span class="s1">&#39;pageready: /jQuery.LazyJaxDavis/demos/pagespecificevents/pages/foo1.html&#39;</span><span class="p">);</span>
        <span class="p">}</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="nx">path</span><span class="o">:</span> <span class="s1">&#39;/jQuery.LazyJaxDavis/demos/pagespecificevents/pages/foo2.html&#39;</span><span class="p">,</span>
        <span class="nx">fetchstart</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>
          <span class="nx">loglight</span><span class="p">(</span><span class="s1">&#39;fetchstart: /jQuery.LazyJaxDavis/demos/pagespecificevents/pages/foo2.html&#39;</span><span class="p">);</span>
        <span class="p">},</span>
        <span class="nx">fetchsuccess</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>
          <span class="nx">loglight</span><span class="p">(</span><span class="s1">&#39;fetchsuccess: /jQuery.LazyJaxDavis/demos/pagespecificevents/pages/foo2.html&#39;</span><span class="p">);</span>
        <span class="p">},</span>
        <span class="nx">pageready</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>
          <span class="nx">loglight</span><span class="p">(</span><span class="s1">&#39;pageready: /jQuery.LazyJaxDavis/demos/pagespecificevents/pages/foo2.html&#39;</span><span class="p">);</span>
        <span class="p">}</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="nx">path</span><span class="o">:</span> <span class="s1">&#39;/jQuery.LazyJaxDavis/demos/pagespecificevents/pages/foo3.html&#39;</span><span class="p">,</span>
        <span class="nx">fetchstart</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>
          <span class="nx">loglight</span><span class="p">(</span><span class="s1">&#39;fetchstart: /jQuery.LazyJaxDavis/demos/pagespecificevents/pages/foo3.html&#39;</span><span class="p">);</span>
        <span class="p">},</span>
        <span class="nx">fetchsuccess</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>
          <span class="nx">loglight</span><span class="p">(</span><span class="s1">&#39;fetchsuccess: /jQuery.LazyJaxDavis/demos/pagespecificevents/pages/foo3.html&#39;</span><span class="p">);</span>
        <span class="p">},</span>
        <span class="nx">pageready</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>
          <span class="nx">loglight</span><span class="p">(</span><span class="s1">&#39;pageready: /jQuery.LazyJaxDavis/demos/pagespecificevents/pages/foo3.html&#39;</span><span class="p">);</span>
        <span class="p">}</span>
      <span class="p">},</span>
      <span class="c1">// this routing makes error because this conflicts with the path regexp pattern of the item below</span>
      <span class="c1">//{</span>
      <span class="c1">//  path: &#39;/jQuery.LazyJaxDavis/demos/pagespecificevents/pages/bar1.html&#39;,</span>
      <span class="c1">//  fetchstart: function(){</span>
      <span class="c1">//    loglight(&#39;fetchstart: /jQuery.LazyJaxDavis/demos/pagespecificevents/pages/bar1.html&#39;);</span>
      <span class="c1">//  },</span>
      <span class="c1">//  fetchsuccess: function(){</span>
      <span class="c1">//    loglight(&#39;fetchsuccess: /jQuery.LazyJaxDavis/demos/pagespecificevents/pages/bar1.html&#39;);</span>
      <span class="c1">//  },</span>
      <span class="c1">//  pageready: function(){</span>
      <span class="c1">//    loglight(&#39;pageready: /jQuery.LazyJaxDavis/demos/pagespecificevents/pages/bar1.html&#39;);</span>
      <span class="c1">//  }</span>
      <span class="c1">//},</span>
      <span class="p">{</span>
        <span class="nx">path</span><span class="o">:</span> <span class="sr">/bar[0-9]+\.html/</span><span class="p">,</span>
        <span class="nx">fetchstart</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>
          <span class="nx">loglight</span><span class="p">(</span><span class="s1">&#39;fetchstart: /bar[0-9]+\.html/&#39;</span><span class="p">);</span>
        <span class="p">},</span>
        <span class="nx">fetchsuccess</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>
          <span class="nx">loglight</span><span class="p">(</span><span class="s1">&#39;fetchsuccess: /bar[0-9]+\.html/&#39;</span><span class="p">);</span>
        <span class="p">},</span>
        <span class="nx">pageready</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>
          <span class="nx">loglight</span><span class="p">(</span><span class="s1">&#39;pageready: /bar[0-9]+\.html/&#39;</span><span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">]);</span>

  <span class="p">});</span>

<span class="p">});</span>
</code></pre></div>




<h3 id="transparent">Transparent Routing</h3>


<p>This demo shows how transparent routing works.</p>

<ul>
<li><a href="/jQuery.LazyJaxDavis/demos/transparents/" target="_blank" class="apply-nolazy">demo (opens in another window)</a></li>
</ul>


<p>In the demo of URL routing above, I wrote that conflicted routings are not allowed. But, sometimes we have the case to want to do the things like it. For example, I want to do something if the URL was <code>/products/*</code>. But, I want to do something else when the URL <code>/products/car.html</code>. So, This can't be resolved with only normal URL routing.</p>

<p>In such case, use transparent routing feature. You can see <code>routeTransparents(...)</code> in the code below. This routing works like "transparent". What I mean here is that the primary events in transparent routing are all ignored. Only <code>pageready</code> event defined here will be fired. Transparent routing was made to apply something to the group of the pages.</p>

<div class="highlight"><pre><code class="javascript"><span class="nx">$</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>

  <span class="c1">// logger</span>
  <span class="kd">var</span> <span class="nx">Logger</span> <span class="p">...</span>
  <span class="kd">var</span> <span class="nx">logger</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Logger</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">log</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">msg</span><span class="p">)</span> <span class="p">{</span> <span class="nx">logger</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">msg</span><span class="p">);</span> <span class="p">};</span>
  <span class="kd">var</span> <span class="nx">loglight</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">msg</span><span class="p">)</span> <span class="p">{</span> <span class="nx">logger</span><span class="p">.</span><span class="nx">loglight</span><span class="p">(</span><span class="nx">msg</span><span class="p">);</span> <span class="p">};</span>
  <span class="kd">var</span> <span class="nx">logblue</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">msg</span><span class="p">)</span> <span class="p">{</span> <span class="nx">logger</span><span class="p">.</span><span class="nx">logblue</span><span class="p">(</span><span class="nx">msg</span><span class="p">);</span> <span class="p">};</span>

  <span class="k">new</span> <span class="nx">$</span><span class="p">.</span><span class="nx">LazyJaxDavis</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">router</span><span class="p">){</span>

    <span class="kd">var</span> <span class="nx">$root</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#lazyjaxdavisroot&#39;</span><span class="p">);</span>

    <span class="nx">router</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="s1">&#39;everyfetchstart&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">page</span><span class="p">){</span>
      <span class="nx">$root</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s1">&#39;opacity&#39;</span><span class="p">,</span> <span class="mf">0.6</span><span class="p">);</span>
      <span class="nb">window</span><span class="p">.</span><span class="nx">scrollTo</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
      <span class="nx">log</span><span class="p">(</span><span class="s1">&#39;everyfetchstart&#39;</span><span class="p">);</span>
    <span class="p">});</span>

    <span class="nx">router</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="s1">&#39;everyfetchsuccess&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">page</span><span class="p">){</span>
      <span class="nx">log</span><span class="p">(</span><span class="s1">&#39;everyfetchsuccess&#39;</span><span class="p">);</span>
      <span class="nx">$root</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s1">&#39;opacity&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
      <span class="nx">$newcontent</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">page</span><span class="p">.</span><span class="nx">rip</span><span class="p">(</span><span class="s1">&#39;content&#39;</span><span class="p">)).</span><span class="nx">hide</span><span class="p">();</span>
      <span class="nx">$root</span><span class="p">.</span><span class="nx">empty</span><span class="p">().</span><span class="nx">append</span><span class="p">(</span><span class="nx">$newcontent</span><span class="p">);</span>
      <span class="nx">$newcontent</span><span class="p">.</span><span class="nx">fadeIn</span><span class="p">();</span>
      <span class="nx">page</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s1">&#39;pageready&#39;</span><span class="p">);</span>
    <span class="p">});</span>

    <span class="nx">router</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="s1">&#39;everypageready&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
      <span class="nx">log</span><span class="p">(</span><span class="s1">&#39;everypageready&#39;</span><span class="p">);</span>
    <span class="p">});</span>

    <span class="nx">router</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="s1">&#39;everyfetchfail&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
      <span class="nx">log</span><span class="p">(</span><span class="s1">&#39;everyfetchfail&#39;</span><span class="p">);</span>
      <span class="nx">$root</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s1">&#39;opacity&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
    <span class="p">});</span>

    <span class="nx">router</span><span class="p">.</span><span class="nx">route</span><span class="p">([</span>
      <span class="p">{</span>
        <span class="nx">path</span><span class="o">:</span> <span class="s1">&#39;/jQuery.LazyJaxDavis/demos/transparents/&#39;</span><span class="p">,</span>
        <span class="nx">fetchstart</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>
          <span class="nx">loglight</span><span class="p">(</span><span class="s1">&#39;fetchstart: /jQuery.LazyJaxDavis/demos/transparents/&#39;</span><span class="p">);</span>
        <span class="p">},</span>
        <span class="nx">fetchsuccess</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>
          <span class="nx">loglight</span><span class="p">(</span><span class="s1">&#39;fetchsuccess: /jQuery.LazyJaxDavis/demos/transparents/&#39;</span><span class="p">);</span>
        <span class="p">},</span>
        <span class="nx">pageready</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>
          <span class="nx">loglight</span><span class="p">(</span><span class="s1">&#39;pageready: /jQuery.LazyJaxDavis/demos/transparents/&#39;</span><span class="p">);</span>
        <span class="p">}</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="nx">path</span><span class="o">:</span> <span class="sr">/\/2010\//</span><span class="p">,</span>
        <span class="nx">fetchstart</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>
          <span class="nx">loglight</span><span class="p">(</span><span class="s1">&#39;fetchstart: /\\/2010\\//&#39;</span><span class="p">);</span>
        <span class="p">},</span>
        <span class="nx">fetchsuccess</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>
          <span class="nx">loglight</span><span class="p">(</span><span class="s1">&#39;fetchsuccess: /\\/2010\\//&#39;</span><span class="p">);</span>
        <span class="p">},</span>
        <span class="nx">pageready</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>
          <span class="nx">loglight</span><span class="p">(</span><span class="s1">&#39;pageready: /\\/2010\\//&#39;</span><span class="p">);</span>
        <span class="p">}</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="nx">path</span><span class="o">:</span> <span class="sr">/\/2011\//</span><span class="p">,</span>
        <span class="nx">fetchstart</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>
          <span class="nx">loglight</span><span class="p">(</span><span class="s1">&#39;fetchstart: /\\/2011\\//&#39;</span><span class="p">);</span>
        <span class="p">},</span>
        <span class="nx">fetchsuccess</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>
          <span class="nx">loglight</span><span class="p">(</span><span class="s1">&#39;fetchsuccess: /\\/2011\\//&#39;</span><span class="p">);</span>
        <span class="p">},</span>
        <span class="nx">pageready</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>
          <span class="nx">loglight</span><span class="p">(</span><span class="s1">&#39;pageready: /\\/2011\\//&#39;</span><span class="p">);</span>
        <span class="p">}</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="nx">path</span><span class="o">:</span> <span class="sr">/\/2012\//</span><span class="p">,</span>
        <span class="nx">fetchstart</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>
          <span class="nx">loglight</span><span class="p">(</span><span class="s1">&#39;fetchstart: /\\/2012\\//&#39;</span><span class="p">);</span>
        <span class="p">},</span>
        <span class="nx">fetchsuccess</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>
          <span class="nx">loglight</span><span class="p">(</span><span class="s1">&#39;fetchsuccess: /\\/2012\\//&#39;</span><span class="p">);</span>
        <span class="p">},</span>
        <span class="nx">pageready</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>
          <span class="nx">loglight</span><span class="p">(</span><span class="s1">&#39;pageready: /\\/2012\\//&#39;</span><span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">]);</span>

    <span class="nx">router</span><span class="p">.</span><span class="nx">routeTransparents</span><span class="p">([</span>
      <span class="p">{</span>
        <span class="nx">path</span><span class="o">:</span> <span class="sr">/\/pages\//</span><span class="p">,</span>
        <span class="nx">pageready</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>
          <span class="nx">logblue</span><span class="p">(</span><span class="s1">&#39;transparent routing - pageready: /\\/pages\\//&#39;</span><span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">]);</span>

  <span class="p">});</span>

<span class="p">});</span>
</code></pre></div>




<h3 id="nodavis">Nodavis</h3>


<p>This demo shows jQuery.LazyJaxDavis without Davis.js.<br/>
This demo doesn't depend on Davis.js. Just not loaded it.</p>

<ul>
<li><a href="/jQuery.LazyJaxDavis/demos/nodavis/" target="_blank" class="apply-nolazy">demo (opens in another window)</a></li>
</ul>


<p>JQuery.LazyJaxDavis works with Davis.js. But, if you don't want to use the ajax-pagefetching feature, you can choose not to use Davis.js. The case I supposed here is - that you just want to use only URL routing feature. In this demo, you can see that the ajax features are turned off. But, URL routings and transparent URL routings are still available. This is efficient when you want to manage what JavaScript code to be called by URL. That is to say, jQuery.LazyJaxDavis is just a URL router here.</p>

<p>If you use jQuery.LazyJaxDavis without Davis.js, you can't set all events related with ajax. Put simply, you can use only <code>pageready</code> event here. If you use this without Davis.js, don't forget to set <code>davis: false</code> as an option.</p>

<div class="highlight"><pre><code class="javascript"><span class="nx">$</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>

  <span class="c1">// logger</span>
  <span class="kd">var</span> <span class="nx">Logger</span> <span class="o">=</span> <span class="p">...</span>
  <span class="kd">var</span> <span class="nx">logger</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Logger</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">log</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">msg</span><span class="p">)</span> <span class="p">{</span> <span class="nx">logger</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">msg</span><span class="p">);</span> <span class="p">};</span>
  <span class="kd">var</span> <span class="nx">logblue</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">msg</span><span class="p">)</span> <span class="p">{</span> <span class="nx">logger</span><span class="p">.</span><span class="nx">logblue</span><span class="p">(</span><span class="nx">msg</span><span class="p">);</span> <span class="p">};</span>

  <span class="k">new</span> <span class="nx">$</span><span class="p">.</span><span class="nx">LazyJaxDavis</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">router</span><span class="p">){</span>

    <span class="kd">var</span> <span class="nx">$root</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#lazyjaxdavisroot&#39;</span><span class="p">);</span>

    <span class="nx">router</span><span class="p">.</span><span class="nx">option</span><span class="p">({</span>
      <span class="nx">davis</span><span class="o">:</span> <span class="kc">false</span>
    <span class="p">});</span>

    <span class="nx">router</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="s1">&#39;everypageready&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
      <span class="nx">log</span><span class="p">(</span><span class="s1">&#39;everypageready&#39;</span><span class="p">);</span>
    <span class="p">});</span>

    <span class="nx">router</span><span class="p">.</span><span class="nx">route</span><span class="p">([</span>
      <span class="p">{</span>
        <span class="nx">path</span><span class="o">:</span> <span class="s1">&#39;/jQuery.LazyJaxDavis/demos/nodavis/&#39;</span><span class="p">,</span>
        <span class="nx">pageready</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>
          <span class="nx">loglight</span><span class="p">(</span><span class="s1">&#39;pageready: /jQuery.LazyJaxDavis/demos/nodavis/&#39;</span><span class="p">);</span>
        <span class="p">}</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="nx">path</span><span class="o">:</span> <span class="sr">/\/2010\//</span><span class="p">,</span>
        <span class="nx">pageready</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>
          <span class="nx">loglight</span><span class="p">(</span><span class="s1">&#39;pageready: /\\/2010\\//&#39;</span><span class="p">);</span>
        <span class="p">}</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="nx">path</span><span class="o">:</span> <span class="sr">/\/2011\//</span><span class="p">,</span>
        <span class="nx">pageready</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>
          <span class="nx">loglight</span><span class="p">(</span><span class="s1">&#39;pageready: /\\/2011\\//&#39;</span><span class="p">);</span>
        <span class="p">}</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="nx">path</span><span class="o">:</span> <span class="sr">/\/2012\//</span><span class="p">,</span>
        <span class="nx">pageready</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>
          <span class="nx">loglight</span><span class="p">(</span><span class="s1">&#39;pageready: /\\/2012\\//&#39;</span><span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">]);</span>

    <span class="nx">router</span><span class="p">.</span><span class="nx">routeTransparents</span><span class="p">([</span>
      <span class="p">{</span>
        <span class="nx">path</span><span class="o">:</span> <span class="sr">/\/pages\//</span><span class="p">,</span>
        <span class="nx">pageready</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>
          <span class="nx">logblue</span><span class="p">(</span><span class="s1">&#39;transparent routing - pageready: /\\/pages\\//&#39;</span><span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">]);</span>

  <span class="p">});</span>

<span class="p">});</span>
</code></pre></div>




<h3 id="davisrouting">Davis routing</h3>


<p>This demo shows how Davis routing works.</p>

<ul>
<li><a href="/jQuery.LazyJaxDavis/demos/davisrouting/" target="_blank" class="apply-nolazy">demo (opens in another window)</a></li>
</ul>


<p>Even if you use jQuery.LazyJaxDavis, you may want to use Davis.js's feature directly. Then, just do <code>router.routeDavis(...)</code> in the initialization function. The passed function will be called as the context of Davis. So you can do the things for Davis.js here. But, keep in mind that the conflicted URLs cannnot be routed with Davis.js here if you defined those with <code>route.route(...)</code>.</p>

<p>You can check that Davis.js works when you clicked "bar~" links in this demo, though it just show logs. And, Take care that Davis.js's features are available only fo the browsers which supports HTML5 history API.</p>

<div class="highlight"><pre><code class="javascript"><span class="nx">$</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>

  <span class="c1">// logger</span>
  <span class="kd">var</span> <span class="nx">Logger</span> <span class="o">=</span> <span class="p">...</span>
  <span class="kd">var</span> <span class="nx">logger</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Logger</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">log</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">msg</span><span class="p">)</span> <span class="p">{</span> <span class="nx">logger</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">msg</span><span class="p">);</span> <span class="p">};</span>
  <span class="kd">var</span> <span class="nx">loglight</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">msg</span><span class="p">)</span> <span class="p">{</span> <span class="nx">logger</span><span class="p">.</span><span class="nx">loglight</span><span class="p">(</span><span class="nx">msg</span><span class="p">);</span> <span class="p">};</span>

  <span class="k">new</span> <span class="nx">$</span><span class="p">.</span><span class="nx">LazyJaxDavis</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">router</span><span class="p">){</span>

    <span class="kd">var</span> <span class="nx">$root</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#lazyjaxdavisroot&#39;</span><span class="p">);</span>

    <span class="nx">router</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="s1">&#39;everyfetchstart&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">page</span><span class="p">){</span>
      <span class="nx">$root</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s1">&#39;opacity&#39;</span><span class="p">,</span> <span class="mf">0.6</span><span class="p">);</span>
      <span class="nb">window</span><span class="p">.</span><span class="nx">scrollTo</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
      <span class="nx">log</span><span class="p">(</span><span class="s1">&#39;everyfetchstart&#39;</span><span class="p">);</span>
    <span class="p">});</span>

    <span class="nx">router</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="s1">&#39;everyfetchsuccess&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">page</span><span class="p">){</span>
      <span class="nx">log</span><span class="p">(</span><span class="s1">&#39;everyfetchsuccess&#39;</span><span class="p">);</span>
      <span class="nx">$root</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s1">&#39;opacity&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
      <span class="nx">$newcontent</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">page</span><span class="p">.</span><span class="nx">rip</span><span class="p">(</span><span class="s1">&#39;content&#39;</span><span class="p">)).</span><span class="nx">hide</span><span class="p">();</span>
      <span class="nx">$root</span><span class="p">.</span><span class="nx">empty</span><span class="p">().</span><span class="nx">append</span><span class="p">(</span><span class="nx">$newcontent</span><span class="p">);</span>
      <span class="nx">$newcontent</span><span class="p">.</span><span class="nx">fadeIn</span><span class="p">();</span>
      <span class="nx">page</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s1">&#39;pageready&#39;</span><span class="p">);</span>
    <span class="p">});</span>

    <span class="nx">router</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="s1">&#39;everypageready&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
      <span class="nx">log</span><span class="p">(</span><span class="s1">&#39;everypageready&#39;</span><span class="p">);</span>
    <span class="p">});</span>

    <span class="nx">router</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="s1">&#39;everyfetchfail&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
      <span class="nx">log</span><span class="p">(</span><span class="s1">&#39;everyfetchfail&#39;</span><span class="p">);</span>
      <span class="nx">$root</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s1">&#39;opacity&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
    <span class="p">});</span>

    <span class="nx">router</span><span class="p">.</span><span class="nx">routeDavis</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;/jQuery.LazyJaxDavis/demos/davisrouting/pages/bar1.html&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">){</span>
        <span class="nx">loglight</span><span class="p">(</span><span class="s1">&#39;davis routing: &#39;</span> <span class="o">+</span> <span class="nx">req</span><span class="p">.</span><span class="nx">path</span><span class="p">);</span>
      <span class="p">});</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;/jQuery.LazyJaxDavis/demos/davisrouting/pages/bar2.html&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">){</span>
        <span class="nx">loglight</span><span class="p">(</span><span class="s1">&#39;davis routing: &#39;</span> <span class="o">+</span> <span class="nx">req</span><span class="p">.</span><span class="nx">path</span><span class="p">);</span>
      <span class="p">});</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;/jQuery.LazyJaxDavis/demos/davisrouting/pages/bar3.html&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">){</span>
        <span class="nx">loglight</span><span class="p">(</span><span class="s1">&#39;davis routing: &#39;</span> <span class="o">+</span> <span class="nx">req</span><span class="p">.</span><span class="nx">path</span><span class="p">);</span>
      <span class="p">});</span>
    <span class="p">});</span>

  <span class="p">});</span>

<span class="p">});</span>
</code></pre></div>




<h3 id="smooth">Customize anchorhandler with smooth scrolling</h3>


<p>Anchorhandler customize with smooth scrolling.</p>

<ul>
<li><a href="/jQuery.LazyJaxDavis/demos/anchorhandler/" target="_blank" class="apply-nolazy">demo (opens in another window)</a></li>
</ul>


<p>In this demo, I used custom anchorhandler with <a href="https://github.com/Takazudo/jQuery.tinyscroller">jQuery.tinyscroller</a>. This is a bit tricky one. Use this if you can understand what the code below means.</p>

<div class="highlight"><pre><code class="javascript"><span class="nx">$</span><span class="p">.</span><span class="nx">tinyscroller</span><span class="p">.</span><span class="nx">live</span><span class="p">();</span> <span class="c1">// lively bind events about scroller</span>

<span class="nx">$</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>

  <span class="k">new</span> <span class="nx">$</span><span class="p">.</span><span class="nx">LazyJaxDavis</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">router</span><span class="p">){</span>

    <span class="kd">var</span> <span class="nx">$root</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#lazyjaxdavisroot&#39;</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">scrollDefer</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>

    <span class="nx">router</span><span class="p">.</span><span class="nx">option</span><span class="p">({</span>
      <span class="nx">expr</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">sidenav</span><span class="o">:</span> <span class="sr">/&lt;!-- sidenav start --&gt;([\s\S]*)&lt;!-- sidenav end --&gt;/</span>
      <span class="p">},</span>
      <span class="nx">anchorhandler</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">hash</span><span class="p">){</span>
        <span class="nx">$</span><span class="p">.</span><span class="nx">tinyscroller</span><span class="p">.</span><span class="nx">scrollTo</span><span class="p">(</span><span class="nx">hash</span><span class="p">);</span> <span class="c1">// invoke scrolling</span>
      <span class="p">}</span>
    <span class="p">});</span>

    <span class="nx">router</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="s1">&#39;everyfetchstart&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">page</span><span class="p">){</span>
      <span class="nx">$root</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s1">&#39;opacity&#39;</span><span class="p">,</span> <span class="mf">0.6</span><span class="p">);</span>
      <span class="nx">scrollDefer</span> <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">tinyscroller</span><span class="p">.</span><span class="nx">scrollTo</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span> <span class="c1">// first, back to top</span>
    <span class="p">});</span>

    <span class="nx">router</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="s1">&#39;everyfetchsuccess&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">page</span><span class="p">){</span>
      <span class="nx">$root</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s1">&#39;opacity&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
      <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#sidenav&#39;</span><span class="p">).</span><span class="nx">empty</span><span class="p">().</span><span class="nx">append</span><span class="p">(</span><span class="nx">page</span><span class="p">.</span><span class="nx">rip</span><span class="p">(</span><span class="s1">&#39;sidenav&#39;</span><span class="p">));</span>
      <span class="nx">$</span><span class="p">.</span><span class="nx">when</span><span class="p">(</span><span class="nx">scrollDefer</span><span class="p">).</span><span class="nx">done</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
          <span class="nx">$newcontent</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">page</span><span class="p">.</span><span class="nx">rip</span><span class="p">(</span><span class="s1">&#39;content&#39;</span><span class="p">)).</span><span class="nx">hide</span><span class="p">();</span>
          <span class="nx">$root</span><span class="p">.</span><span class="nx">empty</span><span class="p">().</span><span class="nx">append</span><span class="p">(</span><span class="nx">$newcontent</span><span class="p">);</span>
          <span class="nx">$</span><span class="p">.</span><span class="nx">when</span><span class="p">(</span><span class="nx">$newcontent</span><span class="p">.</span><span class="nx">fadeIn</span><span class="p">()).</span><span class="nx">done</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
            <span class="c1">// tell the router it&#39;s ready</span>
            <span class="c1">// when scrolling and fadeIn are both done.</span>
            <span class="nx">page</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s1">&#39;pageready&#39;</span><span class="p">);</span>
            <span class="nx">scrollDefer</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
          <span class="p">});</span>
      <span class="p">});</span>
    <span class="p">});</span>

    <span class="nx">router</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="s1">&#39;everyfetchfail&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
      <span class="nx">alert</span><span class="p">(</span><span class="s1">&#39;ajax error!&#39;</span><span class="p">);</span>
      <span class="nx">$root</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s1">&#39;opacity&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
    <span class="p">});</span>

  <span class="p">});</span>

<span class="p">});</span>
</code></pre></div>




			</div>

			<!-- LazyJaxDavis end -->
			</div>
	</div>
</div>

<div class="mod-footer">
	<small>Copyright (c) 2012 <a href="https://github.com/Takazudo">"Takazudo"</a> Takeshi Takatsudo</small>
</div>


<div class="mod-githubribbon">
<a href="https://github.com/Takazudo/jQuery.LazyJaxDavis"><img src="/jQuery.LazyJaxDavis/doc/common/img/ribbon.png" alt="Fork me on GitHub"></a>
</div>

</div></body>
</html>
