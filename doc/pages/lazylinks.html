<!doctype html>
<html class="no-js" lang="en">
<head>
<meta charset="utf-8">
<title>jQuery.LazyJaxDavis - Lazy links/forms</title>
<meta name="viewport" content="width=1000">
<link rel="stylesheet" href="/jQuery.LazyJaxDavis/doc/common/css/style.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script src="/jQuery.LazyJaxDavis/lib/davis.js"></script>
<script src="/jQuery.LazyJaxDavis/jquery.lazyjaxdavis.js"></script>
<script src="/jQuery.LazyJaxDavis/doc/common/js/script.js"></script>
</head>
<body><div class="mod-all">

<div class="mod-header">
	<h1><a href="/jQuery.LazyJaxDavis/doc/">jQuery.LazyJaxDavis</a></h1>
</div>


<div class="mod-body">
	<div class="mod-side">
	<div class="mod-sidenav" id="sidenav">
		<ul>
			<li class="first"><a href="/jQuery.LazyJaxDavis/doc/">Introduction</a></li>
			
				<li class="post"><a href="/jQuery.LazyJaxDavis/doc/pages/setup.html">Setup</a></li>
			
				<li class="post"><a href="/jQuery.LazyJaxDavis/doc/pages/lazylinks.html">Lazy links/forms</a></li>
			
				<li class="post"><a href="/jQuery.LazyJaxDavis/doc/pages/anchorhandling.html">Anchor handling</a></li>
			
				<li class="post"><a href="/jQuery.LazyJaxDavis/doc/pages/urlrouting.html">URL routing</a></li>
			
				<li class="post"><a href="/jQuery.LazyJaxDavis/doc/pages/davis.html">Davis.js</a></li>
			
				<li class="post"><a href="/jQuery.LazyJaxDavis/doc/pages/demos.html">Demos</a></li>
			
		</ul>
		<ul>
			<li><a href="https://github.com/Takazudo/jQuery.LazyJaxDavis"><span>⇱</span> Project page</a></li>
			<li><a href="https://github.com/Takazudo/jQuery.LazyJaxDavis/tags"><span>⇱</span> Downloads</a></li>
		</ul>
	</div>
</div>

	<div class="mod-main" id="main">
			<div id="lazyjaxdavisroot">
			<!-- LazyJaxDavis start -->

			<div class="mod-article">
				<h2>Lazy links/forms</h2>

<p>With jQuery.LazyJaxDavis, all links and forms invokes ajax instead.<br/>
You can handle them with only a few events. I call this lazy.</p>

<h3>Lazy links</h3>

<p>"Lazy links" mean the anchors which jQuery.LazyJaxDavis hijacks.<br/>
If you use jQuery.LazyJaxDavis, Each normal links' click invokes LazyJaxDavis's navigation behavior. LazyJaxDavis observes all links' click using jQuery's event delegation. LazyJaxDavis hijacks all links as default. You should set <code>fetchstart</code> and <code>fetchsuccess</code> events to make your site works.</p>

<h3>No-lazy links</h3>

<p>Even if you want to use jQuery.LazyJaxDavis, you may not want to attach its ajax behavior to some anchors. For example, the anchors which refer imgs or pdf should not to be handled by jQuery.LazyJaxDavis. As default, you can avoid this by attaching <code>apply-nolazy</code> to the class attribute of the anchor like below.</p>

<div class="highlight"><pre><code class="html"><span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;somewhere.html&quot;</span> <span class="na">class=</span><span class="s">&quot;apply-nolazy&quot;</span><span class="nt">&gt;</span>Let me avoid the lazy thing<span class="nt">&lt;/a&gt;</span>
</code></pre></div>


<p>Click the links below to confirm this.</p>

<div class="mod-nolazytestnav">
    <div class="mod-nolazytestnav-lazy">
        <div class="h">Lazy links</div>
        <div class="p">These links has no class attribute.</div>
        <ul>
            <li><a href="/jQuery.LazyJaxDavis/doc/">Introduction</a></li>
            
                
                    <li><a href="/jQuery.LazyJaxDavis/doc/pages/setup.html">Setup</a></li>
                
            
                
            
                
                    <li><a href="/jQuery.LazyJaxDavis/doc/pages/anchorhandling.html">Anchor handling</a></li>
                
            
                
                    <li><a href="/jQuery.LazyJaxDavis/doc/pages/urlrouting.html">URL routing</a></li>
                
            
                
                    <li><a href="/jQuery.LazyJaxDavis/doc/pages/davis.html">Davis.js</a></li>
                
            
                
                    <li><a href="/jQuery.LazyJaxDavis/doc/pages/demos.html">Demos</a></li>
                
            
        </ul>
    </div>
    <div class="mod-nolazytestnav-nolazy">
        <div class="h">No-lazy links</div>
        <div class="p">These links has <code>class="apply-nolazy"</code>.</div>
        <ul>
            <li><a class="apply-nolazy" href="/jQuery.LazyJaxDavis/doc/">Introduction</a></li>
            
                
                    <li><a class="apply-nolazy" href="/jQuery.LazyJaxDavis/doc/pages/setup.html">Setup</a></li>
                
            
                
            
                
                    <li><a class="apply-nolazy" href="/jQuery.LazyJaxDavis/doc/pages/anchorhandling.html">Anchor handling</a></li>
                
            
                
                    <li><a class="apply-nolazy" href="/jQuery.LazyJaxDavis/doc/pages/urlrouting.html">URL routing</a></li>
                
            
                
                    <li><a class="apply-nolazy" href="/jQuery.LazyJaxDavis/doc/pages/davis.html">Davis.js</a></li>
                
            
                
                    <li><a class="apply-nolazy" href="/jQuery.LazyJaxDavis/doc/pages/demos.html">Demos</a></li>
                
            
        </ul>
    </div>
</div>


<h3>Anchors to other domains</h3>

<p>All anchors whose <code>href</code> starts with <code>http</code> will automatically become no-lazy links. This is why history API doesn't allow this for security reason. Basically, this is impossible to handle. Give up about that.</p>

<h3>Let me define which anchors to be hijacked</h3>

<p>You can define what elements to be hijacked like below.</p>

<div class="highlight"><pre><code class="javascript"><span class="k">new</span> <span class="nx">$</span><span class="p">.</span><span class="nx">LazyJaxDavis</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">router</span><span class="p">){</span>
  <span class="nx">router</span><span class="p">.</span><span class="nx">option</span><span class="p">({</span>
    <span class="nx">davis</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">linkSelector</span><span class="o">:</span> <span class="s1">&#39;a:not([href^=#]):not(.apply-nolazy)&#39;</span>
    <span class="p">}</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre></div>


<p>As default, jQuery.LazyJaxDavis hijacks <code>'a:not([href^=#]):not(.apply-nolazy)'</code>. Anchors to the id on the same page should not be contained in here.</p>

<h3>Lazy forms</h3>

<p>"Lazy forms" mean the forms which jQuery.LazyJaxDavis hijacks.<br/>
As lazy links, jQuery.LazyJaxDavis also hijacks all forms' submit.<br/>
jQuery.LazyJaxDavis supports GET and POST. Try to submit the forms below to confirm those works.</p>

<p>Note: Sorry, this "POST" form doesn't work on this GitHub server because this server doesn't allow "POST" method. Clone the repository to your local to confirm these. Instead, you can check <code>everyfetchfail</code> event here, haha.</p>

<div class="mod-forms">
    <div class="h">GET</div>
    <form action="/jQuery.LazyJaxDavis/doc/gettest.html" method="get">
        <input type="text" value="getformtest" name="getval"> <input type="submit" value="go">
    </form>
    <div class="h">POST</div>
    <form action="/jQuery.LazyJaxDavis/doc/posttest.html" method="post">
        <input type="text" value="postformtest" name="postval"> <input type="submit" value="go">
    </form>
</div>




<div class="highlight"><pre><code class="html"><span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">&quot;/jQuery.LazyJaxDavis/doc/gettest.html&quot;</span> <span class="na">method=</span><span class="s">&quot;get&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">value=</span><span class="s">&quot;getformtest&quot;</span> <span class="na">name=</span><span class="s">&quot;getval&quot;</span><span class="nt">&gt;</span> <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;submit&quot;</span> <span class="na">value=</span><span class="s">&quot;go&quot;</span><span class="nt">&gt;</span>
<span class="nt">&lt;/form&gt;</span>
</code></pre></div>




<div class="highlight"><pre><code class="html"><span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">&quot;/jQuery.LazyJaxDavis/doc/posttest.html&quot;</span> <span class="na">method=</span><span class="s">&quot;post&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">value=</span><span class="s">&quot;postformtest&quot;</span> <span class="na">name=</span><span class="s">&quot;postval&quot;</span><span class="nt">&gt;</span> <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;submit&quot;</span> <span class="na">value=</span><span class="s">&quot;go&quot;</span><span class="nt">&gt;</span>
<span class="nt">&lt;/form&gt;</span>
</code></pre></div>


<h3>No-lazy forms</h3>

<p>As lazy links, you can avoid the ajax behavior to add <code>apply-nolazy</code> to the form's class attributes.</p>

<div class="mod-forms">
    <div class="h">GET (no-lazy)</div>
    <form action="/jQuery.LazyJaxDavis/doc/gettest.html" method="get" class="apply-nolazy">
        <input type="text" value="getformtest" name="getval"> <input type="submit" value="go">
    </form>
    <div class="h">POST (no-lazy)</div>
    <form action="/jQuery.LazyJaxDavis/doc/posttest.html" method="post" class="apply-nolazy">
        <input type="text" value="postformtest" name="postval"> <input type="submit" value="go">
    </form>
</div>




<div class="highlight"><pre><code class="html"><span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">&quot;/jQuery.LazyJaxDavis/doc/gettest.html&quot;</span> <span class="na">method=</span><span class="s">&quot;get&quot;</span> <span class="na">class=</span><span class="s">&quot;apply-nolazy&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">value=</span><span class="s">&quot;getformtest&quot;</span> <span class="na">name=</span><span class="s">&quot;getval&quot;</span><span class="nt">&gt;</span> <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;submit&quot;</span> <span class="na">value=</span><span class="s">&quot;go&quot;</span><span class="nt">&gt;</span>
<span class="nt">&lt;/form&gt;</span>
</code></pre></div>




<div class="highlight"><pre><code class="html"><span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">&quot;/jQuery.LazyJaxDavis/doc/posttest.html&quot;</span> <span class="na">method=</span><span class="s">&quot;post&quot;</span> <span class="na">class=</span><span class="s">&quot;apply-nolazy&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">value=</span><span class="s">&quot;postformtest&quot;</span> <span class="na">name=</span><span class="s">&quot;postval&quot;</span><span class="nt">&gt;</span> <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;submit&quot;</span> <span class="na">value=</span><span class="s">&quot;go&quot;</span><span class="nt">&gt;</span>
<span class="nt">&lt;/form&gt;</span>
</code></pre></div>


<h3>Make url routings for POST receivers</h3>

<p>If you handle form POST with jQuery.LazyJaxDavis, you need to make url routings for POST receiver pages like below.</p>

<div class="highlight"><pre><code class="javascript"><span class="k">new</span> <span class="nx">$</span><span class="p">.</span><span class="nx">LazyJaxDavis</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">router</span><span class="p">){</span>
    <span class="nx">router</span><span class="p">.</span><span class="nx">route</span><span class="p">([</span>
        <span class="p">{</span>
            <span class="nx">path</span><span class="o">:</span> <span class="s1">&#39;/jQuery.LazyJaxDavis/doc/posttest.html&#39;</span><span class="p">,</span>
            <span class="nx">method</span><span class="o">:</span> <span class="s1">&#39;POST&#39;</span>
        <span class="p">}</span>
    <span class="p">]);</span>
<span class="p">});</span>
</code></pre></div>


<p>As default jQuery.LazyJaxDavis handles all incoming requests as GET. You need to override this to add <code>method: 'POST'</code> to url routing. Check the <a href="/jQuery.LazyJaxDavis/doc/pages/urlrouting.html">URL routing</a> in this document to learn more about <code>route</code>.</p>

<h3>POST submit doesn't change url</h3>

<p>If you submit with lazy forms as above, the url displayed in the location bar is still unchanged. This is why Davis.js works like this. I think this doesn't make any trouble. But please keep in mind about this.</p>

<h3>POST does not works with regexp</h3>

<p>If you want to use POST. You can't use regexp as path.<br/>
I think there's no needs to use regexp with POST.</p>

			</div>

			<!-- LazyJaxDavis end -->
			</div>
	</div>
</div>

<div class="mod-footer">
	<small>Copyright (c) 2012 <a href="https://github.com/Takazudo">"Takazudo"</a> Takeshi Takatsudo</small>
</div>


<div class="mod-githubribbon">
<a href="https://github.com/Takazudo/jQuery.LazyJaxDavis"><img src="/jQuery.LazyJaxDavis/doc/common/img/ribbon.png" alt="Fork me on GitHub"></a>
</div>

</div></body>
</html>
