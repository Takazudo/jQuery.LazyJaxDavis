<!doctype html>
<html class="no-js" lang="ja">
<head>
<meta charset="utf-8">
<title>jQuery.LazyJaxDavis</title>
<meta name="viewport" content="width=1000">
<link rel="stylesheet" href="/jQuery.LazyJaxDavis/demos/applied/common/css/style.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script src="/jQuery.LazyJaxDavis/lib/davis.js"></script>
<script src="/jQuery.LazyJaxDavis/jquery.lazyjaxdavis.js"></script>
<script src="/jQuery.LazyJaxDavis/demos/applied/common/js/script.js"></script>
</head>
<body><div class="mod-all">

<div class="mod-header">
	<h1><a href="/jQuery.LazyJaxDavis/demos/applied/_site/">jQuery.LazyJaxDavis</a></h1>
</div>


<div class="mod-body">
	<div class="mod-side">
	<ul class="mod-sidenav" id="sidenav">
		<li><a href="/jQuery.LazyJaxDavis/demos/applied/_site/">Top page</a></li>
		
			<li><a href="/jQuery.LazyJaxDavis/demos/applied/_site/01-08-2012/theLazyDog.html">TheLazyDog</a></li>
		
			<li><a href="/jQuery.LazyJaxDavis/demos/applied/_site/01-07-2012/jumpsover.html">JumpsOver</a></li>
		
			<li><a href="/jQuery.LazyJaxDavis/demos/applied/_site/01-06-2012/quickbrown.html">quickbrown</a></li>
		
			<li><a href="/jQuery.LazyJaxDavis/demos/applied/_site/01-05-2012/foobar.html">foobar</a></li>
		
			<li><a href="/jQuery.LazyJaxDavis/demos/applied/_site/01-04-2012/theLazyDog.html">TheLazyDog</a></li>
		
			<li><a href="/jQuery.LazyJaxDavis/demos/applied/_site/01-03-2012/jumpsover.html">JumpsOver</a></li>
		
			<li><a href="/jQuery.LazyJaxDavis/demos/applied/_site/01-02-2012/quickbrown.html">quickbrown</a></li>
		
			<li><a href="/jQuery.LazyJaxDavis/demos/applied/_site/01-01-2012/foobar.html">foobar</a></li>
		
	</ul>
</div>

	<div class="mod-main">
			<div id="lazyjaxdavisroot">
			<!-- LazyJaxDavis start -->

			<div class="mod-article">
				<h2>Introduction</h2>

<p>jQuery.LazyJaxDavis is a url router for static websites using htlm5's history API.</p>

<h3>What jQuery.LazyJaxDavis is for?</h3>

<p>Do you usually use history API?<br/>
It's... pushState, replaceState or something like that.</p>

<p>If you are a developer of JavaScript web applications - and the web app which you work in are pretty challenging, the answer may be "Yes". But in most of the cases it must be "No", I guess. And, when you create static websites which are - for example, a corporate site, a weblog, or something which are not web applications, it is pretty rare to use history API, I think.</p>

<p>But, don't you want to make your websites more dynamic and better for user experience with history API? It sounds hard but it's easy - if you use jQuery.LazyJaxDavis. jQuery.LazyJaxDavis gives you simple API to make it possible.</p>

<p>jQuery.LazyJaxDavis provide easy APIs for static websites.</p>

<h3>Hey, what about the old browser like IE</h3>

<p>New browsers has no problem about history API. But, we need to support them, of course. So do we need to give up using history API? The answer is "No".</p>

<p>jQuery.LazyJaxDavis does not provide dynamic features to the browsers which don't have history API features. This just ignores those browsers. And this bring cool features to the browsers which support history API.</p>

<h3>How does it work?</h3>

<p>This website is a document of jQuery.LazyJaxDavis but also a demo of it.<br/>
Try clicking left navigations or links in this page. You'll see what jQuery.LazyJaxDavis does... if you use a browser which supports history API.</p>

<h3>How can I use this?</h3>

<p>This demo site is a good example to understand how jQuery.LazyJaxDavis works.</p>

<p>First, this website has main content area.<br/>
Click the button below to confirm it.</p>

<p><button id="whatthemaincontent">Let me know what you mean</button></p>

<script>
(function(){
    var $btn = $('#whatthemaincontent');
    var $root = $('#lazyjaxdavisroot');
    var hilighted = false;
    $btn.click(function(){
        if(hilighted){
            hilighted = false;
            $root.css('background', 'none');
            $btn.html('Let me know what you mean');
        }else{
            hilighted = true;
            $root.css('background', '#faa');
            $btn.html('OK, bring me back');
        }
    });
})();
</script>


<p>This is the main area of the website.<br/>
In the case of this website, only the html source in this main area is different among each pages. The html source of Header, footer and sidenav is completely same, right?</p>

<p>So what we should do when the location was changed is - replace the html source in the main area. We don't need to change the source about header, footer and sidenav. jQuery.LazyJaxDavis helps you to do this.</p>

<p>With jQuery.LazyJaxDavis, do like below.</p>

<div class="highlight"><pre><code class="javascript"><span class="nx">$</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>

  <span class="kd">var</span> <span class="nx">$root</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#lazyjaxdavisroot&#39;</span><span class="p">);</span>

  <span class="nx">$</span><span class="p">.</span><span class="nx">LazyJaxDavis</span><span class="p">({</span>
    <span class="nx">everyfetchstart</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">page</span><span class="p">)</span> <span class="p">{</span>
      <span class="nb">window</span><span class="p">.</span><span class="nx">scrollTo</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
      <span class="nx">$root</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s1">&#39;opacity&#39;</span><span class="p">,</span> <span class="mf">0.6</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="nx">everyfetchend</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">page</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">$newcontent</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">page</span><span class="p">.</span><span class="nx">rip</span><span class="p">(</span><span class="s1">&#39;content&#39;</span><span class="p">)).</span><span class="nx">hide</span><span class="p">();</span>
      <span class="nx">$root</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s1">&#39;opacity&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">).</span><span class="nx">empty</span><span class="p">().</span><span class="nx">append</span><span class="p">(</span><span class="nx">$newcontent</span><span class="p">);</span>
      <span class="nx">$newcontent</span><span class="p">.</span><span class="nx">fadeIn</span><span class="p">();</span>
    <span class="p">}</span>
  <span class="p">});</span>

<span class="p">});</span>
</code></pre>
</div>


<p>if you do $.LazyJaxDavis(), all links and form submits are hijacked. Instead of location change, jQuery.LazyJaxDavis does pushState and fetch the target page using jQuery.ajax. You need to define what to do when - ajax was started - and,  ajax was done.</p>

<p>After the ajax thing was done, you can rip the part of the fetched page using page.ript('content'). What does this rip from the page? It's the html source in the main area, of course. But, you need to add the comment to the html like below.</p>

<div class="highlight"><pre><code class="javascript"><span class="o">&lt;</span><span class="nx">div</span> <span class="kr">class</span><span class="o">=</span><span class="s2">&quot;mod-body&quot;</span><span class="o">&gt;</span>
    <span class="nx">sidenav</span> <span class="nx">here</span>
    <span class="o">&lt;</span><span class="nx">div</span> <span class="kr">class</span><span class="o">=</span><span class="s2">&quot;mod-main&quot;</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">id</span><span class="o">=</span><span class="s2">&quot;lazyjaxdavisroot&quot;</span><span class="o">&gt;</span>
            <span class="c">&lt;!--</span> <span class="nx">LazyJaxDavis</span> <span class="nx">start</span> <span class="o">--&gt;</span>

            <span class="o">&lt;</span><span class="nx">div</span> <span class="kr">class</span><span class="o">=</span><span class="s2">&quot;mod-article&quot;</span><span class="o">&gt;</span>
                <span class="nx">main</span> <span class="nx">content</span> <span class="nx">blah</span> <span class="nx">blah</span> <span class="nx">blah</span>
            <span class="o">&lt;</span><span class="err">/div&gt;</span>

            <span class="c">&lt;!--</span> <span class="nx">LazyJaxDavis</span> <span class="nx">end</span> <span class="o">--&gt;</span>
            <span class="o">&lt;</span><span class="err">/div&gt;</span>
    <span class="o">&lt;</span><span class="err">/div&gt;</span>
<span class="o">&lt;</span><span class="err">/div&gt;</span>
</code></pre>
</div>


<p>The source code between <code>&lt;!-- LazyJaxDavis start --&gt;</code> and <code>&lt;!-- LazyJaxDavis end --&gt;</code> are the result of <code>page.ript('content')</code> is what you want. then, update the page.</p>

<p>Basically, that's what jQuery.LazyJaxDavis does.</p>

<p>As you see, this demo site shows nowloading on the left top corner of the browser.  If you want to do the things like that, just add the code to the event handler <code>everyfetchstart</code> and <code>everyfetchend</code>.</p>

<p>jQuery.LazyJaxDavis provides only the apis to do things like this. To know more, keep reading the other pages in this document.</p>

<h3>Lazy links and no-lazy links</h3>


<p>If you use LazyJaxDavis, All normal links' click invoke LazyJaxDavis's navigation behavior. LazyJaxDavis observes all links' click using jQuery's delegate. LazyJaxDavis hijacks all links as default. You should set "fetchstart" and "fetchend" events to make your site work.</p>


<div class="mod-nolazytestnav">
    <div class="mod-nolazytestnav-lazy">
        <div class="h">Lazy links</div>
        <div class="p">These links are normal links - just like &lt;a href=&quot;blahblah&quot;&gt;&lt;/a&gt;.<br>Click these to make sure that ajax navigation works.</div>
        <ul>
            <li><a href="/jQuery.LazyJaxDavis/demos/applied/_site/">Top page</a></li>
            
                <li><a href="/jQuery.LazyJaxDavis/demos/applied/_site/01-08-2012/theLazyDog.html">TheLazyDog</a></li>
            
                <li><a href="/jQuery.LazyJaxDavis/demos/applied/_site/01-07-2012/jumpsover.html">JumpsOver</a></li>
            
                <li><a href="/jQuery.LazyJaxDavis/demos/applied/_site/01-06-2012/quickbrown.html">quickbrown</a></li>
            
                <li><a href="/jQuery.LazyJaxDavis/demos/applied/_site/01-05-2012/foobar.html">foobar</a></li>
            
                <li><a href="/jQuery.LazyJaxDavis/demos/applied/_site/01-04-2012/theLazyDog.html">TheLazyDog</a></li>
            
                <li><a href="/jQuery.LazyJaxDavis/demos/applied/_site/01-03-2012/jumpsover.html">JumpsOver</a></li>
            
                <li><a href="/jQuery.LazyJaxDavis/demos/applied/_site/01-02-2012/quickbrown.html">quickbrown</a></li>
            
                <li><a href="/jQuery.LazyJaxDavis/demos/applied/_site/01-01-2012/foobar.html">foobar</a></li>
            
        </ul>
    </div>
    <div class="mod-nolazytestnav-nolazy">
        <div class="h">No-lazy links</div>
        <div class="p">These links are no-lazy links. Each of these anchors has "apply-nolazy" in its class attribute. All links with this class do not invoke LazyJaxDavis's navigation. That is to say, these links are just normal link we see every websites.</div>
        <ul>
            <li><a class="apply-nolazy" href="/jQuery.LazyJaxDavis/demos/applied/_site/">Top page</a></li>
            
                <li><a class="apply-nolazy" href="/jQuery.LazyJaxDavis/demos/applied/_site/01-08-2012/theLazyDog.html">TheLazyDog</a></li>
            
                <li><a class="apply-nolazy" href="/jQuery.LazyJaxDavis/demos/applied/_site/01-07-2012/jumpsover.html">JumpsOver</a></li>
            
                <li><a class="apply-nolazy" href="/jQuery.LazyJaxDavis/demos/applied/_site/01-06-2012/quickbrown.html">quickbrown</a></li>
            
                <li><a class="apply-nolazy" href="/jQuery.LazyJaxDavis/demos/applied/_site/01-05-2012/foobar.html">foobar</a></li>
            
                <li><a class="apply-nolazy" href="/jQuery.LazyJaxDavis/demos/applied/_site/01-04-2012/theLazyDog.html">TheLazyDog</a></li>
            
                <li><a class="apply-nolazy" href="/jQuery.LazyJaxDavis/demos/applied/_site/01-03-2012/jumpsover.html">JumpsOver</a></li>
            
                <li><a class="apply-nolazy" href="/jQuery.LazyJaxDavis/demos/applied/_site/01-02-2012/quickbrown.html">quickbrown</a></li>
            
                <li><a class="apply-nolazy" href="/jQuery.LazyJaxDavis/demos/applied/_site/01-01-2012/foobar.html">foobar</a></li>
            
        </ul>
    </div>
</div>




			</div>

			<!-- LazyJaxDavis end -->
			</div>
	</div>
</div>

<div class="mod-footer">
	This page is the demo of <a href="https://github.com/Takazudo/jQuery.LazyJaxDavis">jQuery.LazyJaxDavis</a>.
</div>


</div></body>
</html>
