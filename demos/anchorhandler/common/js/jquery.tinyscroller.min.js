/*! jQuery.tinyscroller - v0.2.1 -  4/6/2012
 * https://github.com/Takazudo/jQuery.tinyscroller
 * Copyright (c) 2012 "Takazudo" Takeshi Takatsudo; Licensed MIT */(function(){var a=Array.prototype.slice,b=function(a,b){return function(){return a.apply(b,arguments)}},c=Object.prototype.hasOwnProperty,d=function(a,b){function e(){this.constructor=a}for(var d in b)c.call(b,d)&&(a[d]=b[d]);return e.prototype=b.prototype,a.prototype=new e,a.__super__=b.prototype,a};(function(c,e,f){var g,h,i,j,k,l;return k={},h=c(e),g=c(f),l=Math.round,j=Math.min,i=Math.abs,k.yOf=function(a){var b;b=0;while(a.offsetParent)b+=a.offsetTop,a=a.offsetParent;return b},k.isHash=function(a){return/^#.+$/.test(a)},k.getWhereTo=function(a){var b;return b=c(a),b.data("scrollto")||b.attr("href")},k.calcY=function(a){var b,d;if(c.type(a)==="number")return a;if(c.type(a)==="string"){if(!k.isHash(a))return!1;b=g.find(a)}else b=c(a);return b.size()?(d=k.yOf(b[0]),d):null},k.scrollTop=function(){return g.scrollTop()||f.documentElement.scrollTop||f.body.scrollTop||e.pageYOffset||0},k.Event=function(){function b(){this._callbacks={}}return b.prototype.bind=function(a,b){var c,d,e,f,g;c=a.split(" ");for(f=0,g=c.length;f<g;f++)d=c[f],(e=this._callbacks)[d]||(e[d]=[]),this._callbacks[d].push(b);return this},b.prototype.one=function(a,b){return this.bind(a,function(){return this.unbind(a,arguments.callee),b.apply(this,arguments)})},b.prototype.trigger=function(){var b,c,d,e,f,g,h;b=1<=arguments.length?a.call(arguments,0):[],d=b.shift(),e=(h=this._callbacks)!=null?h[d]:void 0;if(!e)return;for(f=0,g=e.length;f<g;f++){c=e[f];if(c.apply(this,b)===!1)break}return this},b.prototype.unbind=function(a,b){var c,d,e,f,g;if(!a)return this._callbacks={},this;e=(g=this._callbacks)!=null?g[a]:void 0;if(!e)return this;if(!b)return delete this._callbacks[a],this;for(d=0,f=e.length;d<f;d++){c=e[d];if(c!==b)continue;e=e.slice(),e.splice(d,1),this._callbacks[a]=e;break}return this},b}(),k.Scroller=function(a){function f(a){this._stepToNext=b(this._stepToNext,this),this.option(a),f.__super__.constructor.apply(this,arguments)}return d(f,a),f.prototype.options={speed:30,maxStep:2e3,slowdownRate:3,changehash:!0,selector:"a[href^=#]:not(.apply-noscroll)"},f.prototype._invokeScroll=function(){var a=this;return this.trigger("scrollstart",this._endY,this._reservedHash),this._scrollDefer.then(function(){return a.options.changehash&&a._reservedHash&&(location.hash=a._reservedHash),a.trigger("scrollend",a._endY,a._reservedHash)},function(){return a.trigger("scrollcancel",a._endY,a._reservedHash)}).always(function(){return a._reservedHash&&(a._reservedHash=null),a._scrollDefer=null}),this._stepToNext(),this},f.prototype._stepToNext=function(){var a,b,c,d,f,m,n,o,p;return n=k.scrollTop(),c=this.options,this._endY>n?(a=g.height(),o=h.height(),f=l((a-n-o)/c.slowdownRate),m=l((this._endY-n)/c.slowdownRate),b=j(f,m),d=j(b,c.maxStep),d<2&&(d=2)):d=-j(i(l((this._endY-n)/c.slowdownRate)),c.maxStep),e.scrollTo(0,n+d),this._cancelNext?(this._cancelNext=!1,this._scrollDefer.reject()):i(n-self._endY)<=1||k.scrollTop()===n?(e.scrollTo(0,this._endY),(p=this._scrollDefer)!=null&&p.resolve()):setTimeout(this._stepToNext,c.speed),this},f.prototype.scrollTo=function(a){var b;return k.isHash(a)&&(this._reservedHash=a),b=k.calcY(a),b===!1?this:(this._endY=b,this._scrollDefer=c.Deferred(),this._invokeScroll(),this._scrollDefer)},f.prototype.stop=function(){return this._scrollDefer&&(this._cancelNext=!0),this},f.prototype.option=function(a){return a?(c.extend(this.options,a),this):this.options},f.prototype.live=function(a){var b;return a=a||this.options.selector,b=this,g.on("click",a,function(a){return a.preventDefault(),b.scrollTo(k.getWhereTo(this))}),this},f}(k.Event),c.tinyscroller=new k.Scroller,c.fn.tinyscrollable=function(){return this.each(function(){var a;return a=c(this),a.data("tinyscrollerattached")?this:(a.on("click",function(a){return a.preventDefault(),c.tinyscroller.scrollTo(k.getWhereTo(this))}),a.data("tinyscrollerattached",!0))})},c.TinyscrollerNs=k,c.Tinyscroller=k.Scroller})(jQuery,this,this.document)}).call(this);